{% extends 'adminBase.html' %}
{% load static %}
{% block title %} Product Creation {% endblock %}
{% block content %}

    <div class="container mt-5">
        <h2 class="text-center my-4">Create New Product</h2>
        <form method="POST">
            {% csrf_token %}
            
           <!-- Product Name -->
            <div class="mb-3">
                <label class="form-label">Product Name</label>
                {{ form.productname }}
            </div>
            
            <!-- Product Image URL -->
            <div class="mb-3">
                <label class="form-label">Main Product Image URL</label>
                {{ form.productimage }}
            </div>
            
            <!-- Beige Variant Dropdown -->
            <div class="mb-3">
                <label for="id_beigeid" class="form-label">Beige Variant</label>
                <select name="beigeid" id="id_beigeid" class="form-select">
                    <option value="">-- Select a Beige Variant --</option>
                    {% for variant in beige_variants %}
                        <option value="{{ variant.pk }}"
                            {% if form.beigeid.value|stringformat:"s" == variant.pk|stringformat:"s" %}selected{% endif %}>
                            {{ variant.name }}
                        </option>
                    {% endfor %}
                </select>
                {% if form.beigeid.errors %}
                    <div class="text-danger">{{ form.beigeid.errors }}</div>
                {% endif %}
            </div>
            
            <!-- Blue Variant -->
            <div class="mb-3">
                <label for="id_blueid" class="form-label">Blue Variant</label>
                <select name="blueid" id="id_blueid" class="form-select">
                    <option value="">-- Select a Blue Variant --</option>
                    {% for variant in blue_variants %}
                        <option value="{{ variant.pk }}"
                            {% if form.blueid.value|stringformat:"s" == variant.pk|stringformat:"s" %}selected{% endif %}>
                            {{ variant.name }}
                        </option>
                    {% endfor %}
                </select>
                {% if form.blueid.errors %}
                    <div class="text-danger">{{ form.blueid.errors }}</div>
                {% endif %}
            </div>
            
            <!-- Red Variant -->
            <div class="mb-3">
                <label for="id_redid" class="form-label">Red Variant</label>
                <select name="redid" id="id_redid" class="form-select">
                    <option value="">-- Select a Red Variant --</option>
                    {% for variant in red_variants %}
                        <option value="{{ variant.pk }}"
                            {% if form.redid.value|stringformat:"s" == variant.pk|stringformat:"s" %}selected{% endif %}>
                            {{ variant.name }}
                        </option>
                    {% endfor %}
                </select>
                {% if form.redid.errors %}
                    <div class="text-danger">{{ form.redid.errors }}</div>
                {% endif %}
            </div>
            
            <!-- White Variant -->
            <div class="mb-3">
                <label for="id_whiteid" class="form-label">White Variant</label>
                <select name="whiteid" id="id_whiteid" class="form-select">
                    <option value="">-- Select a White Variant --</option>
                    {% for variant in white_variants %}
                        <option value="{{ variant.pk }}"
                            {% if form.whiteid.value|stringformat:"s" == variant.pk|stringformat:"s" %}selected{% endif %}>
                            {{ variant.name }}
                        </option>
                    {% endfor %}
                </select>
                {% if form.whiteid.errors %}
                    <div class="text-danger">{{ form.whiteid.errors }}</div>
                {% endif %}
            </div>
            
            <!-- Yellow Variant -->
            <div class="mb-3">
                <label for="id_yellowid" class="form-label">Yellow Variant</label>
                <select name="yellowid" id="id_yellowid" class="form-select">
                    <option value="">-- Select a Yellow Variant --</option>
                    {% for variant in yellow_variants %}
                        <option value="{{ variant.pk }}"
                            {% if form.yellowid.value|stringformat:"s" == variant.pk|stringformat:"s" %}selected{% endif %}>
                            {{ variant.name }}
                        </option>
                    {% endfor %}
                </select>
                {% if form.yellowid.errors %}
                    <div class="text-danger">{{ form.yellowid.errors }}</div>
                {% endif %}
            </div>
            
            <!-- Brown Variant -->
            <div class="mb-3">
                <label for="id_brownid" class="form-label">Brown Variant</label>
                <select name="brownid" id="id_brownid" class="form-select">
                    <option value="">-- Select a Brown Variant --</option>
                    {% for variant in brown_variants %}
                        <option value="{{ variant.pk }}"
                            {% if form.brownid.value|stringformat:"s" == variant.pk|stringformat:"s" %}selected{% endif %}>
                            {{ variant.name }}
                        </option>
                    {% endfor %}
                </select>
                {% if form.brownid.errors %}
                    <div class="text-danger">{{ form.brownid.errors }}</div>
                {% endif %}
            </div>
            
            <!-- Gray Variant -->
            <div class="mb-3">
                <label for="id_grayid" class="form-label">Gray Variant</label>
                <select name="grayid" id="id_grayid" class="form-select">
                    <option value="">-- Select a Gray Variant --</option>
                    {% for variant in gray_variants %}
                        <option value="{{ variant.pk }}"
                            {% if form.grayid.value|stringformat:"s" == variant.pk|stringformat:"s" %}selected{% endif %}>
                            {{ variant.name }}
                        </option>
                    {% endfor %}
                </select>
                {% if form.grayid.errors %}
                    <div class="text-danger">{{ form.grayid.errors }}</div>
                {% endif %}
            </div>
            
            <!-- Orange Variant -->
            <div class="mb-3">
                <label for="id_orangeid" class="form-label">Orange Variant</label>
                <select name="orangeid" id="id_orangeid" class="form-select">
                    <option value="">-- Select a Orange Variant --</option>
                    {% for variant in orange_variants %}
                        <option value="{{ variant.pk }}"
                            {% if form.orangeid.value|stringformat:"s" == variant.pk|stringformat:"s" %}selected{% endif %}>
                            {{ variant.name }}
                        </option>
                    {% endfor %}
                </select>
                {% if form.orangeid.errors %}
                    <div class="text-danger">{{ form.orangeid.errors }}</div>
                {% endif %}
            </div>

            <!-- Submit Button -->
            <div>
                <div class="mb-3">
                    <button type="submit" class="btn btn-primary">Create Product</button>
                </div>
                <div class="mb-3">
                    <div>
                        <a href="{% url "variantCreation" %}" class="btn btn-primary">
                            Create Variant
                        </a>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('.color-options').forEach(group => {
            const selectId = group.getAttribute('data-select-id');
            const select = document.getElementById(selectId);

            group.querySelectorAll('.image-option').forEach(option => {
                option.addEventListener('click', () => {
                const value = option.getAttribute('data-value');
                const image = option.querySelector('img');

                const isSelected = image.classList.contains('selected');

                // Unselect if already selected
                if (isSelected) {
                    image.classList.remove('selected');
                    select.value = ''; // Reset the select value
                    return;
                }

                // Otherwise, select this one and unselect others
                group.querySelectorAll('img').forEach(img => img.classList.remove('selected'));
                image.classList.add('selected');
                select.value = value;
                });
            });
            });
        });
    </script>

{% endblock %}